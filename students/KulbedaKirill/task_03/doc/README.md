# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ03

<p align="center">–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –†–µ—Å–ø—É–±–ª–∏–∫–∏ –ë–µ–ª–∞—Ä—É—Å—å</p>
<p align="center">–£—á—Ä–µ–∂–¥–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</p>
<p align="center">‚Äú–ë—Ä–µ—Å—Ç—Å–∫–∏–π –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç‚Äù</p>
<p align="center">–ö–∞—Ñ–µ–¥—Ä–∞ –ò–ò–¢</p>
<br><br><br><br><br><br>
<p align="center"><strong>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ03</strong></p>
<p align="center"><strong>–ü–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ:</strong> ‚Äú–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –∏ –æ–±–ª–∞—á–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏‚Äù</p>
<p align="center"><strong>–¢–µ–º–∞:</strong> Kubernetes: —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ</p>
<br><br><br><br><br><br>
<p align="right"><strong>–í—ã–ø–æ–ª–Ω–∏–ª:</strong></p>
<p align="right">–°—Ç—É–¥–µ–Ω—Ç 4 –∫—É—Ä—Å–∞</p>
<p align="right">–ì—Ä—É–ø–ø—ã –ê–°-63</p>
<p align="right">–ö—É–ª—å–±–µ–¥–∞ –ö. –ê.</p>
<p align="right"><strong>–ü—Ä–æ–≤–µ—Ä–∏–ª:</strong></p>
<p align="right">–ù–µ—Å—é–∫ –ê. –ù.</p>
<br><br><br><br><br>
<p align="center"><strong>–ë—Ä–µ—Å—Ç 2025</strong></p>

---

## –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–ù–∞—É—á–∏—Ç—å—Å—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Kubernetes (Redis) —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º (PVC) –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º (CronJob), –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø–æ–¥–∞.

---

### –í–∞—Ä–∏–∞–Ω—Ç ‚Ññ12

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç–∞

- **–§–ò–û:** –ö—É–ª—å–±–µ–¥–∞ –ö–∏—Ä–∏–ª–ª –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∏—á
- **–ì—Ä—É–ø–ø–∞:** –ê–°-63
- **‚Ññ —Å—Ç—É–¥–µ–Ω—á–µ—Å–∫–æ–≥–æ (StudentID):** 220016
- **Email (—É—á–µ–±–Ω—ã–π):** <as006313@g.bstu.by>
- **GitHub username:** fr0ogi
- **–í–∞—Ä–∏–∞–Ω—Ç ‚Ññ:** 12
- **–û–° –∏ –≤–µ—Ä—Å–∏—è:** Windows 11 23H2, Docker Desktop v4.52.0, kubectl (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –≤–µ—Ä—Å–∏–∏ Docker Desktop)

---

## –û–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: Kubernetes –∫–ª–∞—Å—Ç–µ—Ä (Docker Desktop / Minikube), –æ–±—Ä–∞–∑—ã `redis:7`, `kubectl`. –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º StorageClass. –î–ª—è –±—ç–∫–∞–ø–æ–≤ ‚Äî `redis-cli --rdb`.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è c –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

```
src/
  k8s/
    namespace.yaml           # Namespace —Å –º–µ—Ç–∫–∞–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
    secret.yaml              # Secret –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    service-headless.yaml    # Headless Service –¥–ª—è Redis
    statefulset-redis.yaml   # StatefulSet —Å PVC (2Gi)
    pvc-backup.yaml          # PVC –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
    cronjob-backup.yaml      # CronJob –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–∂–¥—ã–µ 20 –º–∏–Ω—É—Ç
doc/
  README.md                  # —Ç–µ–∫—É—â–∏–π —Ñ–∞–π–ª
```

## –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. Namespace –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
   - –°–æ–∑–¥–∞–Ω Namespace `state-as63-220016-v12` —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –ª–µ–π–±–ª–æ–≤ `org.bstu.*` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞, –≥—Ä—É–ø–ø—ã, –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∏ –∫—É—Ä—Å–∞.

2. StatefulSet Redis + Headless Service
   - `statefulset-redis.yaml`: 1 —Ä–µ–ø–ª–∏–∫–∞ Redis 7, `volumeClaimTemplates` –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (2Gi), –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è `STU_ID`, `STU_GROUP`, `STU_VARIANT` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
   - `service-headless.yaml`: Headless Service (`clusterIP: None`) –¥–ª—è –ø—Ä—è–º–æ–≥–æ DNS-–¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–¥–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `db-as63-220016-v12-0.db-as63-220016-v12`).

3. –•—Ä–∞–Ω–∏–ª–∏—â–µ
   - PVC –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 2Gi —Å —Ä–µ–∂–∏–º–æ–º –¥–æ—Å—Ç—É–ø–∞ `ReadWriteOnce`, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `volumeClaimTemplates`.

4. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
   - `cronjob-backup.yaml`: CronJob –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é `*/20 * * * *` (–∫–∞–∂–¥—ã–µ 20 –º–∏–Ω—É—Ç) –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å `redis-cli --rdb`, —Å–æ—Ö—Ä–∞–Ω—è—è —Å–Ω–∏–º–æ–∫ –ë–î (RDB) –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π PVC –¥–ª—è –±—ç–∫–∞–ø–æ–≤.

5. Secret –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - `secret.yaml`: —Å–æ–∑–¥–∞–Ω Secret –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### –î–µ–ø–ª–æ–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
kubectl apply -f src/k8s/namespace.yaml
kubectl apply -n state-as63-220016-v12 -f src/k8s/secret.yaml
kubectl apply -n state-as63-220016-v12 -f src/k8s/service-headless.yaml
kubectl apply -n state-as63-220016-v12 -f src/k8s/statefulset-redis.yaml
kubectl apply -n state-as63-220016-v12 -f src/k8s/pvc-backup.yaml
kubectl apply -n state-as63-220016-v12 -f src/k8s/cronjob-backup.yaml

# –ü—Ä–æ–≤–µ—Ä–∫–∞
kubectl -n state-as63-220016-v12 get pods,pvc
kubectl -n state-as63-220016-v12 logs statefulset/db-as63-220016-v12

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
kubectl -n state-as63-220016-v12 run -it redis-client --image=redis:7 --restart=Never --rm -- sh -lc \
  "redis-cli -h db-as63-220016-v12-0.db-as63-220016-v12 SET lab:key1 value1 && redis-cli -h db-as63-220016-v12-0.db-as63-220016-v12 GET lab:key1"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–¥ (—Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∑–∞ —Å—á—ë—Ç PVC)
kubectl -n state-as63-220016-v12 delete pod db-as63-220016-v12-0
kubectl -n state-as63-220016-v12 run -it redis-client --image=redis:7 --restart=Never --rm -- sh -lc \
  "redis-cli -h db-as63-220016-v12-0.db-as63-220016-v12 GET lab:key1"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–∞–ø –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–∏–∑ CronJob)
kubectl -n state-as63-220016-v12 create job --from=cronjob/backup-as63-220016-v12 backup-now
kubectl -n state-as63-220016-v12 logs job/backup-now
kubectl -n state-as63-220016-v12 get pods
```

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ (checklist)

- [‚úÖ] README —Å –ø–æ–ª–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
- [‚úÖ] Kubernetes –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã: Namespace, StatefulSet, Headless Service, PVC, CronJob
- [‚úÖ] Secret –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [‚úÖ] –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (PVC 2Gi —Å volumeClaimTemplates)
- [‚úÖ] Headless Service –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö DNS-–∏–º—ë–Ω –ø–æ–¥–æ–≤
- [‚úÖ] –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ CronJob –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é `*/20 * * * *`
- [‚úÖ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø–æ–¥–∞

---

## –°—Å—ã–ª–∫—ã(–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–¥–∞–Ω–∏–µ)

üëâ –ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã: tasks/task_03/

## –í—ã–≤–æ–¥

–í —Ä–∞–º–∫–∞—Ö –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ stateful-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Redis) –≤ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º StatefulSet, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —á–µ—Ä–µ–∑ PersistentVolumeClaim, Headless Service –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–¥–∞–º –ø–æ DNS, –∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ CronJob. –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø–æ–¥–æ–≤ –∑–∞ —Å—á—ë—Ç –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –º–µ—Ç–æ–¥–∏–∫–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É (–≤–∞—Ä–∏–∞–Ω—Ç 12: Redis, 2Gi —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ backup `*/20 * * * *`).
