# Значения по умолчанию для Helm chart
# Вариант 14

# Параметры студента
student:
  id: "220018"
  group: "АС-63"
  variant: "14"
  fullname: "Логинов Глеб Олегович"
  slug: "as63-220018-v14"
  owner: "gleb7499"

# Namespace
namespace: app14

# Deployment настройки
replicaCount: 3

image:
  repository: gleb7499/lab1-v14
  tag: stu-220018-v14
  pullPolicy: IfNotPresent

# Имя сервиса согласно варианту
nameOverride: "web14"
fullnameOverride: "web14"

# Порт согласно варианту
service:
  type: ClusterIP
  port: 80
  targetPort: 8062

# Ingress настройки
ingress:
  enabled: true
  className: nginx
  host: web14.local
  path: /
  pathType: Prefix

# Ресурсы согласно варианту 14
resources:
  requests:
    memory: "96Mi"
    cpu: "100m"
  limits:
    memory: "192Mi"
    cpu: "200m"

# Probes
probes:
  startup:
    enabled: true
    httpGet:
      path: /healthz
      port: 8062
    initialDelaySeconds: 0
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 6
  liveness:
    enabled: true
    httpGet:
      path: /healthz
      port: 8062
    initialDelaySeconds: 5
    periodSeconds: 15
    timeoutSeconds: 3
    failureThreshold: 3
  readiness:
    enabled: true
    httpGet:
      path: /healthz
      port: 8062
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3

# Security context
securityContext:
  runAsNonRoot: true
  runAsUser: 10001
  runAsGroup: 10001
  fsGroup: 10001

# Rolling update strategy
strategy:
  type: RollingUpdate
  rollingUpdate:
    maxUnavailable: 0
    maxSurge: 1

# ConfigMap данные
configMap:
  STU_ID: "220018"
  STU_GROUP: "АС-63"
  STU_VARIANT: "14"
  APP_PORT: "8062"
  APP_HOST: "0.0.0.0"

# Secret данные (для production используйте внешние secret management системы)
secret:
  DATABASE_URL: "postgresql://app_user:app_pass@data-db-as63-220018-v14:5432/app_220018_v14"
  POSTGRES_USER: "app_user"
  POSTGRES_PASSWORD: "app_pass"
  POSTGRES_DB: "app_220018_v14"

# PostgreSQL настройки
postgresql:
  enabled: true
  image: postgres:16-alpine
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "500m"
  persistence:
    enabled: true
    size: 1Gi
    accessMode: ReadWriteOnce

# Labels для всех ресурсов
labels:
  org.bstu.owner: gleb7499
  org.bstu.student.slug: as63-220018-v14
  org.bstu.course: RSIOT
  org.bstu.student.id: "220018"
  org.bstu.group: "АС-63"
  org.bstu.variant: "14"
  org.bstu.student.fullname: "Логинов Глеб Олегович"
